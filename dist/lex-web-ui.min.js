/*!
* lex-web-ui v"0.8.0"
* (c) 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.
* Released under the Amazon Software License.
*/   
!(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue"),require("vuex"),require("aws-sdk/global"),require("aws-sdk/clients/lexruntime"),require("aws-sdk/clients/polly")):"function"==typeof define&&define.amd?define(["vue","vuex","aws-sdk/global","aws-sdk/clients/lexruntime","aws-sdk/clients/polly"],t):"object"==typeof exports?exports.LexWebUi=t(require("vue"),require("vuex"),require("aws-sdk/global"),require("aws-sdk/clients/lexruntime"),require("aws-sdk/clients/polly")):e.LexWebUi=t(e.vue,e.vuex,e["aws-sdk/global"],e["aws-sdk/clients/lexruntime"],e["aws-sdk/clients/polly"])})(this,(function(e,t,n,i,r){return (function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=59)})([(function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),(function(e,t,n){var i=n(34)("wks"),r=n(21),o=n(2).Symbol,s="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:r)("Symbol."+e))}).store=i}),(function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),(function(e,t,n){var i=n(4),r=n(44),o=n(29),s=Object.defineProperty;t.f=n(5)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}}),(function(e,t,n){var i=n(16);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}}),(function(e,t,n){e.exports=!n(11)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))}),(function(e,t){e.exports=function(e,t,n,i,r){var o,s=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(o=e,s=e.default);var u="function"==typeof s?s.options:s;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns),i&&(u._scopeId=i);var c;if(r?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):n&&(c=n),c){var l=u.functional,d=l?u.render:u.beforeCreate;l?u.render=function(e,t){return c.call(t),d(e,t)}:u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:o,exports:s,options:u}}}),(function(e,t,n){var i=n(2),r=n(0),o=n(15),s=n(8),a=function(e,t,n){var u,c,l,d=e&a.F,f=e&a.G,p=e&a.S,h=e&a.P,A=e&a.B,m=e&a.W,g=f?r:r[t]||(r[t]={}),v=g.prototype,y=f?i:p?i[t]:(i[t]||{}).prototype;f&&(n=t);for(u in n)(c=!d&&y&&void 0!==y[u])&&u in g||(l=c?y[u]:n[u],g[u]=f&&"function"!=typeof y[u]?n[u]:A&&c?o(l,i):m&&y[u]==l?(function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t})(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((g.virtual||(g.virtual={}))[u]=l,e&a.R&&v&&!v[u]&&s(v,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a}),(function(e,t,n){var i=n(3),r=n(17);e.exports=n(5)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}}),(function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}}),(function(e,t,n){var i=n(46),r=n(30);e.exports=function(e){return i(r(e))}}),(function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}}),(function(e,t,n){var i=n(45),r=n(35);e.exports=Object.keys||function(e){return i(e,r)}}),(function(e,t,n){e.exports={default:n(67),__esModule:!0}}),(function(e,t){e.exports={}}),(function(e,t,n){var i=n(27);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}}),(function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}}),(function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}}),(function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}}),(function(e,t,n){"use strict";var i=n(68)(!0);n(48)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))}),(function(e,t,n){"use strict";t.__esModule=!0;var i=n(43),r=(function(e){return e&&e.__esModule?e:{default:e}})(i);t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}}),(function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}}),(function(e,t){t.f={}.propertyIsEnumerable}),(function(e,t,n){var i=n(30);e.exports=function(e){return Object(i(e))}}),(function(e,t){e.exports=!0}),(function(e,t,n){var i=n(3).f,r=n(9),o=n(1)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}}),(function(e,t,n){n(72);for(var i=n(2),r=n(8),o=n(14),s=n(1)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=i[c],d=l&&l.prototype;d&&!d[s]&&r(d,s,c),o[c]=o.Array}}),(function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}}),(function(e,t,n){var i=n(16),r=n(2).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}}),(function(e,t,n){var i=n(16);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}}),(function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}}),(function(e,t,n){var i=n(32),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}}),(function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}}),(function(e,t,n){var i=n(34)("keys"),r=n(21);e.exports=function(e){return i[e]||(i[e]=r(e))}}),(function(e,t,n){var i=n(2),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}}),(function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),(function(e,t){t.f=Object.getOwnPropertySymbols}),(function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),(function(e,t,n){e.exports={default:n(65),__esModule:!0}}),(function(e,t,n){var i=n(18),r=n(1)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}}),(function(e,t,n){var i=n(39),r=n(1)("iterator"),o=n(14);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}}),(function(e,t,n){t.f=n(1)}),(function(e,t,n){var i=n(2),r=n(0),o=n(24),s=n(41),a=n(3).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}}),(function(e,t,n){e.exports={default:n(60),__esModule:!0}}),(function(e,t,n){e.exports=!n(5)&&!n(11)((function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a}))}),(function(e,t,n){var i=n(9),r=n(10),o=n(63)(!1),s=n(33)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;t.length>u;)i(a,n=t[u++])&&(~o(c,n)||c.push(n));return c}}),(function(e,t,n){var i=n(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}}),(function(e,t){}),(function(e,t,n){"use strict";var i=n(24),r=n(7),o=n(49),s=n(8),a=n(9),u=n(14),c=n(69),l=n(25),d=n(71),f=n(1)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,A,m,g,v){c(n,t,A);var y,b,x,w=function(e){if(!p&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},V=t+" Iterator",_="values"==m,C=!1,I=e.prototype,M=I[f]||I["@@iterator"]||m&&I[m],S=M||w(m),k=m?_?w("entries"):S:void 0,T="Array"==t?I.entries||M:M;if(T&&(x=d(T.call(new e)))!==Object.prototype&&(l(x,V,!0),i||a(x,f)||s(x,f,h)),_&&M&&"values"!==M.name&&(C=!0,S=function(){return M.call(this)}),i&&!v||!p&&!C&&I[f]||s(I,f,S),u[t]=S,u[V]=h,m)if(y={values:_?S:w("values"),keys:g?S:w("keys"),entries:k},v)for(b in y)b in I||o(I,b,y[b]);else r(r.P+r.F*(p||C),t,y);return y}}),(function(e,t,n){e.exports=n(8)}),(function(e,t,n){var i=n(4),r=n(70),o=n(35),s=n(33)("IE_PROTO"),a=function(){},u=function(){var e,t=n(28)("iframe"),i=o.length;for(t.style.display="none",n(51).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u.prototype[o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=i(e),n=new a,a.prototype=null,n[s]=e):n=u(),void 0===t?n:r(n,t)}}),(function(e,t,n){e.exports=n(2).document&&document.documentElement}),(function(e,t,n){var i=n(4);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}}),(function(e,t,n){var i=n(14),r=n(1)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}}),(function(e,t,n){var i,r,o,s=n(15),a=n(79),u=n(51),c=n(28),l=n(2),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,A=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++A]=function(){a("function"==typeof e?e:Function(e),t)},i(A),A},p=function(e){delete m[e]},"process"==n(18)(d)?i=function(e){d.nextTick(s(g,e,1))}:h?(r=new h,o=r.port2,r.port1.onmessage=v,i=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(e){l.postMessage(e+"","*")},l.addEventListener("message",v,!1)):i="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(s(g,e,1),0)}),e.exports={set:f,clear:p}}),(function(e,t,n){var i=n(1)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},e(o)}catch(e){}return n}}),(function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(100),o=i(r),s=n(103),a=i(s);t.default=(function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=(0,a.default)(e);!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})()}),(function(e,t,n){var i=n(45),r=n(35).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}}),(function(e,t,n){"use strict";t.__esModule=!0;var i=n(38),r=(function(e){return e&&e.__esModule?e:{default:e}})(i);t.default=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()}),(function(e,t,n){"use strict";function i(e){n(91)}function r(e){n(92)}function o(e){n(90)}function s(e){n(89)}function a(e){n(93)}function u(e){n(94)}function c(e){n(88)}function l(e,t){return Be()(e).map((function(n){var i=n in t?Pe()({},e[n],t[n]):e[n];return Qe()({},n,i)})).reduce((function(e,t){return Pe()({},e,t)}),{})}Object.defineProperty(t,"__esModule",{value:!0});var d={name:"toolbar-container",props:["toolbarTitle","toolbarColor","toolbarLogo","isUiMinimized"],computed:{toolTipMinimize:function(){return{html:this.isUiMinimized?"maximize":"minimize"}}},methods:{toggleMinimize:function(){this.$emit("toggleMinimizeUi")}}},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{class:e.toolbarColor,attrs:{dark:"",dense:""}},[n("img",{attrs:{src:e.toolbarLogo}}),e._v(" "),n("v-toolbar-title",{staticClass:"hidden-xs-and-down"},[e._v("\n    "+e._s(e.toolbarTitle)+"\n  ")]),e._v(" "),n("v-spacer"),e._v(" "),e.$store.state.isRunningEmbedded?n("v-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:left",value:e.toolTipMinimize,expression:"toolTipMinimize",arg:"left"}],attrs:{icon:"",light:""},nativeOn:{click:function(t){e.toggleMinimize(t)}}},[n("v-icon",[e._v("\n      "+e._s(e.isUiMinimized?"arrow_drop_up":"arrow_drop_down")+"\n    ")])],1):e._e()],1)},p=[],h={render:f,staticRenderFns:p},A=h,m=n(6),g=m(d,A,null,null,null),v=g.exports,y={name:"message-text",props:["message"],computed:{shouldConvertUrlToLinks:function(){return this.$store.state.config.ui.convertUrlToLinksInBotMessages},shouldStripTags:function(){return this.$store.state.config.ui.stripTagsFromBotMessages},shouldRenderAsHtml:function(){return"bot"===this.message.type&&this.shouldConvertUrlToLinks},botMessageAsHtml:function(){var e=this.stripTagsFromMessage(this.message.text);return this.botMessageWithLinks(e)}},methods:{encodeAsHtml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},botMessageWithLinks:function(e){var t=this;return[{type:"web",regex:new RegExp("\\b((?:https?://\\w{1}|www\\.)(?:[\\w-.]){2,256}(?:[\\w._~:/?#@!$&()*+,;=['\\]-]){0,256})","im"),replace:function(e){var n=/^https?:\/\//.test(e)?e:"http://"+e;return'<a target="_blank" href="'+encodeURI(n)+'">'+t.encodeAsHtml(e)+"</a>"}}].reduce((function(e,n){return e.split(n.regex).reduce((function(e,i,r,o){var s="";if(r%2==0){var a=r+1===o.length?"":n.replace(o[r+1]);s=""+t.encodeAsHtml(i)+a}return e+s}),"")}),e)},stripTagsFromMessage:function(e){var t=document.implementation.createHTMLDocument("").body;return t.innerHTML=e,t.textContent||t.innerText||""}}},b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.message.text&&"human"===e.message.type?n("div",{staticClass:"message-text"},[e._v("\n  "+e._s(e.message.text)+"\n")]):e.message.text&&e.shouldRenderAsHtml?n("div",{staticClass:"message-text",domProps:{innerHTML:e._s(e.botMessageAsHtml)}}):e.message.text&&"bot"===e.message.type?n("div",{staticClass:"message-text"},[e._v("\n  "+e._s(e.shouldStripTags?e.stripTagsFromMessage(e.message.text):e.message.text)+"\n")]):e._e()},x=[],w={render:b,staticRenderFns:x},V=w,_=n(6),C=i,I=_(y,V,C,"data-v-d69cb2c8",null),M=I.exports,S={name:"response-card",props:["response-card"],data:function(){return{hasButtonBeenClicked:!1}},computed:{},methods:{onButtonClick:function(e){this.hasButtonBeenClicked=!0;var t={type:"human",text:e};this.$store.dispatch("postTextMessage",t)}}},k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[e.responseCard.title.trim()?n("v-card-title",{staticClass:"red lighten-5",attrs:{"primary-title":""}},[n("span",{staticClass:"headline"},[e._v(e._s(e.responseCard.title))])]):e._e(),e._v(" "),e.responseCard.subTitle?n("v-card-text",[n("span",[e._v(e._s(e.responseCard.subTitle))])]):e._e(),e._v(" "),e.responseCard.imageUrl?n("v-card-media",{attrs:{src:e.responseCard.imageUrl,contain:"",height:"33vh"}}):e._e(),e._v(" "),e._l(e.responseCard.buttons,(function(t,i){return n("v-card-actions",{key:i,staticClass:"button-row",attrs:{actions:""}},[t.text&&t.value?n("v-btn",{attrs:{disabled:e.hasButtonBeenClicked,default:""},nativeOn:{"~click":function(n){e.onButtonClick(t.value)}}},[e._v("\n      "+e._s(t.text)+"\n    ")]):e._e()],1)})),e._v(" "),e.responseCard.attachmentLinkUrl?n("v-card-actions",[n("v-btn",{staticClass:"red lighten-5",attrs:{flat:"",tag:"a",href:e.responseCard.attachmentLinkUrl,target:"_blank"}},[e._v("\n      Open Link\n    ")])],1):e._e()],2)},T=[],R={render:k,staticRenderFns:T},E=R,B=n(6),O=r,P=B(S,E,O,"data-v-799b9a4e",null),F=P.exports,Q={name:"message",props:["message"],components:{MessageText:M,ResponseCard:F},computed:{botDialogState:function(){if(!("dialogState"in this.message))return null;switch(this.message.dialogState){case"Failed":return{icon:"error",color:"red"};case"Fulfilled":case"ReadyForFulfillment":return{icon:"done",color:"green"};default:return null}},shouldDisplayResponseCard:function(){return this.message.responseCard&&("1"===this.message.responseCard.version||1===this.message.responseCard.version)&&"application/vnd.amazonaws.card.generic"===this.message.responseCard.contentType&&"genericAttachments"in this.message.responseCard&&this.message.responseCard.genericAttachments instanceof Array}},methods:{playAudio:function(){var e=this.$el.querySelector("audio");e&&e.play()}}},j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message"},[n("v-chip",["text"in e.message&&null!==e.message.text&&e.message.text.length?n("message-text",{attrs:{message:e.message}}):e._e(),e._v(" "),"human"===e.message.type&&e.message.audio?n("div",[n("audio",[n("source",{attrs:{src:e.message.audio,type:"audio/wav"}})]),e._v(" "),n("v-btn",{staticClass:"black--text",attrs:{left:"",icon:""},nativeOn:{click:function(t){e.playAudio(t)}}},[n("v-icon",{staticClass:"play-button"},[e._v("play_circle_outline")])],1)],1):e._e(),e._v(" "),"bot"===e.message.type&&e.botDialogState?n("v-icon",{class:e.botDialogState.color+"--text",attrs:{medium:""}},[e._v("\n      "+e._s(e.botDialogState.icon)+"\n    ")]):e._e()],1),e._v(" "),e.shouldDisplayResponseCard?n("div",{staticClass:"response-card"},e._l(e.message.responseCard.genericAttachments,(function(e,t){return n("response-card",{key:t,attrs:{"response-card":e}})}))):e._e()],1)},U=[],q={render:j,staticRenderFns:U},L=q,W=n(6),G=o,D=W(Q,L,G,"data-v-290c8f4f",null),N=D.exports,J={name:"message-list",components:{Message:N},computed:{messages:function(){return this.$store.state.messages}},watch:{messages:function(){var e=this;this.$nextTick((function(){e.$el.scrollTop=e.$el.scrollHeight}))}}},K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"message-list"},e._l(e.messages,(function(e){return n("message",{key:e.id,class:"message-"+e.type,attrs:{message:e}})})))},z=[],Z={render:K,staticRenderFns:z},H=Z,Y=n(6),X=s,$=Y(J,H,X,"data-v-20b8f18d",null),ee=$.exports,te={name:"status-bar",data:function(){return{volume:0,volumeIntervalId:null}},computed:{isSpeechConversationGoing:function(){return this.isConversationGoing},isProcessing:function(){return this.isSpeechConversationGoing&&!this.isRecording&&!this.isBotSpeaking},statusText:function(){return this.isInterrupting?"Interrupting...":this.canInterruptBotPlayback?'Say "skip" and I\'ll listen for your answer...':this.isMicMuted?"Microphone seems to be muted...":this.isRecording?"Listening...":this.isBotSpeaking?"Playing audio...":this.isSpeechConversationGoing?"Processing...":this.isRecorderSupported?"Type or click on the mic":""},canInterruptBotPlayback:function(){return this.$store.state.botAudio.canInterrupt},isBotSpeaking:function(){return this.$store.state.botAudio.isSpeaking},isConversationGoing:function(){return this.$store.state.recState.isConversationGoing},isMicMuted:function(){return this.$store.state.recState.isMicMuted},isRecorderSupported:function(){return this.$store.state.recState.isRecorderSupported},isRecording:function(){return this.$store.state.recState.isRecording}},methods:{enterMeter:function(){var e=this,t=0;this.volumeIntervalId=setInterval((function(){e.$store.dispatch("getRecorderVolume").then((function(n){e.volume=n.instant.toFixed(4),t=Math.max(e.volume,t)}))}),50)},leaveMeter:function(){this.volumeIntervalId&&clearInterval(this.volumeIntervalId)}}},ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"status-bar white"},[n("v-divider"),e._v(" "),n("div",{staticClass:"status-text"},[n("span",[e._v(e._s(e.statusText))])]),e._v(" "),n("div",{staticClass:"voice-controls"},[n("transition",{attrs:{css:!1},on:{enter:e.enterMeter,leave:e.leaveMeter}},[e.isRecording?n("div",{staticClass:"ml-2 volume-meter"},[n("meter",{attrs:{value:e.volume,min:"0.0001",low:"0.005",optimum:"0.04",high:"0.07",max:"0.09"}})]):e._e()])],1)],1)},ie=[],re={render:ne,staticRenderFns:ie},oe=re,se=n(6),ae=a,ue=se(te,oe,ae,"data-v-2df12d09",null),ce=ue.exports,le=n(13),de=n.n(le),fe={name:"input-container",data:function(){return{textInput:""}},computed:{micButtonIcon:function(){return this.isMicMuted?"mic_off":this.isBotSpeaking?"stop":"mic"},isMicButtonDisabled:function(){return this.isMicMuted},isBotSpeaking:function(){return this.$store.state.botAudio.isSpeaking},isConversationGoing:function(){return this.$store.state.recState.isConversationGoing},isMicMuted:function(){return this.$store.state.recState.isMicMuted},isRecorderSupported:function(){return this.$store.state.recState.isRecorderSupported}},props:["textInputPlaceholder","initialSpeechInstruction","initialText"],methods:{postTextMessage:function(){var e=this;if(!this.textInput.length)return de.a.resolve();var t={type:"human",text:this.textInput};return this.$store.dispatch("postTextMessage",t).then((function(){e.textInput=""}))},onMicClick:function(){return this.isConversationGoing?this.isBotSpeaking?this.$store.dispatch("interruptSpeechConversation"):de.a.resolve():this.startSpeechConversation()},startSpeechConversation:function(){var e=this;return this.isMicMuted?de.a.resolve():this.setAutoPlay().then((function(){return e.playInitialInstruction()})).then((function(){return e.$store.dispatch("startConversation")})).catch((function(t){e.$store.dispatch("pushErrorMessage","I couldn't start the conversation. Please try again. ("+t+")")}))},playInitialInstruction:function(){var e=this;return["","Fulfilled","Failed"].some((function(t){return e.$store.state.lex.dialogState===t}))?this.$store.dispatch("pollySynthesizeSpeech",this.initialSpeechInstruction):de.a.resolve()},setAutoPlay:function(){return this.$store.state.botAudio.autoPlay?de.a.resolve():this.$store.dispatch("setAudioAutoPlay")}}},pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-container white"},[n("v-text-field",{staticClass:"black--text ml-2",attrs:{id:"text-input",name:"text-input",label:e.textInputPlaceholder,"single-line":""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;t.stopPropagation(),e.postTextMessage(t)}},model:{value:e.textInput,callback:function(t){e.textInput="string"==typeof t?t.trim():t},expression:"textInput"}}),e._v(" "),e.isRecorderSupported?n("v-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:left",value:{html:"click to use voice"},expression:"{html: 'click to use voice'}",arg:"left"}],staticClass:"black--text mic-button",attrs:{icon:"",disabled:e.isMicButtonDisabled},nativeOn:{click:function(t){e.onMicClick(t)}}},[n("v-icon",{attrs:{medium:""}},[e._v(e._s(e.micButtonIcon))])],1):e._e()],1)},he=[],Ae={render:pe,staticRenderFns:he},me=Ae,ge=n(6),ve=u,ye=ge(fe,me,ve,"data-v-6dd14e82",null),be=ye.exports,xe=n(13),we=n.n(xe),Ve={name:"lex-web",components:{ToolbarContainer:v,MessageList:ee,StatusBar:ce,InputContainer:be},computed:{initialSpeechInstruction:function(){return this.$store.state.config.lex.initialSpeechInstruction},initialText:function(){return this.$store.state.config.lex.initialText},textInputPlaceholder:function(){return this.$store.state.config.ui.textInputPlaceholder},toolbarColor:function(){return this.$store.state.config.ui.toolbarColor},toolbarTitle:function(){return this.$store.state.config.ui.toolbarTitle},toolbarLogo:function(){return this.$store.state.config.ui.toolbarLogo},isUiMinimized:function(){return this.$store.state.isUiMinimized}},beforeMount:function(){"true"!==this.$store.state.config.urlQueryParams.lexWebUiEmbed?(this.$store.commit("setIsRunningEmbedded",!1),this.$store.commit("setAwsCredsProvider","cognito")):(document.referrer.startsWith(this.$store.state.config.ui.parentOrigin),window.addEventListener("message",this.messageHandler,!1),this.$store.commit("setIsRunningEmbedded",!0),this.$store.commit("setAwsCredsProvider","parentWindow"))},mounted:function(){var e=this;this.$store.dispatch("getConfigFromParent").then((function(t){return e.$store.dispatch("initConfig",t)})).then((function(){return we.a.all([e.$store.dispatch("initCredentials",e.$lexWebUi.awsConfig.credentials),e.$store.dispatch("initRecorder"),e.$store.dispatch("initBotAudio",new Audio)])})).then((function(){return we.a.all([e.$store.dispatch("initMessageList"),e.$store.dispatch("initPollyClient",e.$lexWebUi.pollyClient),e.$store.dispatch("initLexClient",e.$lexWebUi.lexRuntimeClient)])})).then((function(){return e.$store.state.isRunningEmbedded?e.$store.dispatch("sendMessageToParentWindow",{event:"ready"}):we.a.resolve()})).then((function(){})).catch((function(e){}))},methods:{toggleMinimizeUi:function(){return this.$store.dispatch("toggleIsUiMinimized")},messageHandler:function(e){if(e.origin===this.$store.state.config.ui.parentOrigin&&e.ports)switch(e.data.event){case"ping":case"parentReady":e.ports[0].postMessage({event:"resolve",type:e.data.event});break;case"toggleMinimizeUi":this.$store.dispatch("toggleIsUiMinimized").then((function(){e.ports[0].postMessage({event:"resolve",type:e.data.event})}));break;case"postText":if(!e.data.message)return void e.ports[0].postMessage({event:"reject",type:e.data.event,error:"missing message field"});this.$store.dispatch("postTextMessage",{type:"human",text:e.data.message}).then((function(){e.ports[0].postMessage({event:"resolve",type:e.data.event})}))}}}},_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"lex-web"}},[n("toolbar-container",{attrs:{"toolbar-title":e.toolbarTitle,"toolbar-color":e.toolbarColor,"toolbar-logo":e.toolbarLogo,"is-ui-minimized":e.isUiMinimized},on:{toggleMinimizeUi:e.toggleMinimizeUi}}),e._v(" "),n("message-list"),e._v(" "),n("status-bar"),e._v(" "),n("input-container",{attrs:{"text-input-placeholder":e.textInputPlaceholder,"initial-text":e.initialText,"initial-speech-instruction":e.initialSpeechInstruction}})],1)},Ce=[],Ie={render:_e,staticRenderFns:Ce},Me=Ie,Se=n(6),ke=c,Te=Se(Ve,Me,ke,null,null),Re=Te.exports,Ee=n(95),Be=n.n(Ee),Oe=n(20),Pe=n.n(Oe),Fe=n(99),Qe=n.n(Fe),je=n(56),Ue=n.n(je),qe=n(106),Le=qe.keys().pop(),We=Le?qe(Le):n(107),Ge=n(108),De=Ge.keys().pop(),Ne=De?Ge(De):We,Je=["dev","prod","test"].find((function(e){return"production".startsWith(e)})),Ke=n(109)("./config."+Je+".json"),ze={region:"us-east-1",cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",botAlias:"$LATEST",initialText:'You can ask me for help ordering flowers. Just type "order flowers" or click on the mic and say it.',initialSpeechInstruction:'Say "Order Flowers" to get started',sessionAttributes:{},reInitSessionAttributesOnRestart:!0,enablePlaybackInterrupt:!1,playbackInterruptVolumeThreshold:-60,playbackInterruptLevelThreshold:.0075,playbackInterruptNoiseThreshold:-75,playbackInterruptMinDuration:2},polly:{voiceId:"Joanna"},ui:{pageTitle:"Order Flowers Bot",parentOrigin:"",textInputPlaceholder:"Type here",toolbarColor:"red",toolbarTitle:"Order Flowers",toolbarLogo:We,favIcon:Ne,pushInitialTextOnRestart:!0,reInitSessionAttributesOnRestart:!1,convertUrlToLinksInBotMessages:!0,stripTagsFromBotMessages:!0},recorder:{enable:!0,recordingTimeMax:10,recordingTimeMin:2.5,quietThreshold:.002,quietTimeMin:.3,volumeThreshold:-65,useAutoMuteDetect:!1},converser:{silentConsecutiveRecordingMax:3},urlQueryParams:{}},Ze=l(ze,Ke),He=(function(e){try{return e.split("?",2).slice(1,2).reduce((function(e,t){return t.split("&")}),[]).map((function(e){return e.split("=")})).reduce((function(e,t){var n=Ue()(t,2),i=n[0],r=n[1],o=void 0===r||r,s=Qe()({},i,decodeURIComponent(o));return Pe()({},e,s)}),{})}catch(e){return{}}})(window.location.href),Ye=(function(e){try{return e.lexWebUiConfig?JSON.parse(e.lexWebUiConfig):{}}catch(e){return{}}})(He);Ye.ui&&Ye.ui.parentOrigin&&delete Ye.ui.parentOrigin;var Xe=l(Ze,Ye);Xe.ui.parentOrigin=Xe.ui.parentOrigin||window.location.origin;var $e=Pe()({},Xe,{urlQueryParams:He}),et={version:"0.8.0",lex:{acceptFormat:"audio/ogg",dialogState:"",isInterrupting:!1,isProcessing:!1,inputTranscript:"",intentName:"",message:"",responseCard:null,sessionAttributes:$e.lex.sessionAttributes,slotToElicit:"",slots:{}},messages:[],polly:{outputFormat:"ogg_vorbis",voiceId:$e.polly.voiceId},botAudio:{canInterrupt:!1,interruptIntervalId:null,autoPlay:!1,isInterrupting:!1,isSpeaking:!1},recState:{isConversationGoing:!1,isInterrupting:!1,isMicMuted:!1,isMicQuiet:!0,isRecorderSupported:!1,isRecorderEnabled:$e.recorder.enable,isRecording:!1,silentRecordingCount:0},isRunningEmbedded:!1,isUiMinimized:!1,config:$e,awsCreds:{provider:"cognito"}},tt={canInterruptBotPlayback:function(e){return e.botAudio.canInterrupt},isBotSpeaking:function(e){return e.botAudio.isSpeaking},isConversationGoing:function(e){return e.recState.isConversationGoing},isLexInterrupting:function(e){return e.lex.isInterrupting},isLexProcessing:function(e){return e.lex.isProcessing},isMicMuted:function(e){return e.recState.isMicMuted},isMicQuiet:function(e){return e.recState.isMicQuiet},isRecorderSupported:function(e){return e.recState.isRecorderSupported},isRecording:function(e){return e.recState.isRecording}},nt=n(113),it=n.n(nt),rt=n(20),ot=n.n(rt),st={setIsMicMuted:function(e,t){"boolean"==typeof t&&e.config.recorder.useAutoMuteDetect&&(e.recState.isMicMuted=t)},setIsMicQuiet:function(e,t){"boolean"==typeof t&&(e.recState.isMicQuiet=t)},setIsConversationGoing:function(e,t){"boolean"==typeof t&&(e.recState.isConversationGoing=t)},startRecording:function(e,t){!1===e.recState.isRecording&&(t.start(),e.recState.isRecording=!0)},stopRecording:function(e,t){!0===e.recState.isRecording&&(e.recState.isRecording=!1,t.isRecording&&t.stop())},increaseSilentRecordingCount:function(e){e.recState.silentRecordingCount+=1},resetSilentRecordingCount:function(e){e.recState.silentRecordingCount=0},setIsRecorderEnabled:function(e,t){"boolean"==typeof t&&(e.recState.isRecorderEnabled=t)},setIsRecorderSupported:function(e,t){"boolean"==typeof t&&(e.recState.isRecorderSupported=t)},setIsBotSpeaking:function(e,t){"boolean"==typeof t&&(e.botAudio.isSpeaking=t)},setAudioAutoPlay:function(e,t,n){"boolean"==typeof n&&(e.botAudio.autoPlay=n,t.autoplay=n)},setCanInterruptBotPlayback:function(e,t){"boolean"==typeof t&&(e.botAudio.canInterrupt=t)},setIsBotPlaybackInterrupting:function(e,t){"boolean"==typeof t&&(e.botAudio.isInterrupting=t)},setBotPlaybackInterruptIntervalId:function(e,t){"number"==typeof t&&(e.botAudio.interruptIntervalId=t)},updateLexState:function(e,t){e.lex=ot()({},e.lex,t)},setLexSessionAttributes:function(e,t){"object"===(void 0===t?"undefined":it()(t))&&(e.lex.sessionAttributes=t)},setIsLexProcessing:function(e,t){"boolean"==typeof t&&(e.lex.isProcessing=t)},setIsLexInterrupting:function(e,t){"boolean"==typeof t&&(e.lex.isInterrupting=t)},setAudioContentType:function(e,t){switch(t){case"mp3":case"mpg":case"mpeg":e.polly.outputFormat="mp3",e.lex.acceptFormat="audio/mpeg";break;case"ogg":case"ogg_vorbis":case"x-cbr-opus-with-preamble":default:e.polly.outputFormat="ogg_vorbis",e.lex.acceptFormat="audio/ogg"}},setPollyVoiceId:function(e,t){"string"==typeof t&&(e.polly.voiceId=t)},mergeConfig:function(e,t){"object"===(void 0===t?"undefined":it()(t))&&(t.ui&&t.ui.parentOrigin&&delete t.ui.parentOrigin,e.config=l(e.config,t))},setIsRunningEmbedded:function(e,t){"boolean"==typeof t&&(e.isRunningEmbedded=t)},toggleIsUiMinimized:function(e){e.isUiMinimized=!e.isUiMinimized},pushMessage:function(e,t){e.messages.push(ot()({id:e.messages.length},t))},setAwsCredsProvider:function(e,t){e.awsCreds.provider=t}},at=n(127),ut=n.n(at),ct=n(13),lt=n.n(ct),dt=n(43),ft=n.n(dt),pt=n(37),ht=n.n(pt),At=n(58),mt=n.n(At),gt=n(132),vt=n.n(gt),yt=(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ht()(this,e),this.initOptions(n),this._eventTarget=document.createDocumentFragment(),this._encoderWorker=new vt.a,this._encoderWorker.addEventListener("message",(function(e){return t._exportWav(e.data)}))}return mt()(e,[{key:"initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.preset&&ft()(e,this._getPresetOptions(e.preset)),this.mimeType=e.mimeType||"audio/wav",this.recordingTimeMax=e.recordingTimeMax||8,this.recordingTimeMin=e.recordingTimeMin||2,this.recordingTimeMinAutoIncrease=void 0===e.recordingTimeMinAutoIncrease||!!e.recordingTimeMinAutoIncrease,this.autoStopRecording=void 0===e.autoStopRecording||!!e.autoStopRecording,this.quietThreshold=e.quietThreshold||.001,this.quietTimeMin=e.quietTimeMin||.4,this.volumeThreshold=e.volumeThreshold||-75,this.useBandPass=void 0===e.useBandPass||!!e.useBandPass,this.bandPassFrequency=e.bandPassFrequency||4e3,this.bandPassQ=e.bandPassQ||.707,this.bufferLength=e.bufferLength||2048,this.numChannels=e.numChannels||1,this.requestEchoCancellation=void 0===e.requestEchoCancellation||!!e.requestEchoCancellation,this.useAutoMuteDetect=void 0===e.useAutoMuteDetect||!!e.useAutoMuteDetect,this.muteThreshold=e.muteThreshold||1e-7,this.encoderUseTrim=void 0===e.encoderUseTrim||!!e.encoderUseTrim,this.encoderQuietTrimThreshold=e.encoderQuietTrimThreshold||8e-4,this.encoderQuietTrimSlackBack=e.encoderQuietTrimSlackBack||4e3}},{key:"_getPresetOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low_latency";return this._presets=["low_latency","speech_recognition"],-1===this._presets.indexOf(e)?{}:{low_latency:{encoderUseTrim:!0,useBandPass:!0},speech_recognition:{encoderUseTrim:!1,useBandPass:!1,useAutoMuteDetect:!1}}[e]}},{key:"init",value:function(){var e=this;return this._state="inactive",this._instant=0,this._slow=0,this._clip=0,this._maxVolume=-1/0,this._isMicQuiet=!0,this._isMicMuted=!1,this._isSilentRecording=!0,this._silentRecordingConsecutiveCount=0,this._initAudioContext().then((function(){return e._initMicVolumeProcessor()})).then((function(){return e._initStream()}))}},{key:"start",value:function(){"inactive"===this._state&&void 0!==this._stream&&(this._state="recording",this._recordingStartTime=this._audioContext.currentTime,this._eventTarget.dispatchEvent(new Event("start")),this._encoderWorker.postMessage({command:"init",config:{sampleRate:this._audioContext.sampleRate,numChannels:this.numChannels,useTrim:this.encoderUseTrim,quietTrimThreshold:this.encoderQuietTrimThreshold,quietTrimSlackBack:this.encoderQuietTrimSlackBack}}))}},{key:"stop",value:function(){"recording"===this._state&&(this._recordingStartTime>this._quietStartTime?(this._isSilentRecording=!0,this._silentRecordingConsecutiveCount+=1,this._eventTarget.dispatchEvent(new Event("silentrecording"))):(this._isSilentRecording=!1,this._silentRecordingConsecutiveCount=0,this._eventTarget.dispatchEvent(new Event("unsilentrecording"))),this._state="inactive",this._recordingStartTime=0,this._encoderWorker.postMessage({command:"exportWav",type:"audio/wav"}),this._eventTarget.dispatchEvent(new Event("stop")))}},{key:"_exportWav",value:function(e){this._eventTarget.dispatchEvent(new CustomEvent("dataavailable",{detail:e.data})),this._encoderWorker.postMessage({command:"clear"})}},{key:"_recordBuffers",value:function(e){if("recording"===this._state){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);this._encoderWorker.postMessage({command:"record",buffer:t})}}},{key:"_setIsMicMuted",value:function(){if(this.useAutoMuteDetect)return this._instant>=this.muteThreshold?void(this._isMicMuted&&(this._isMicMuted=!1,this._eventTarget.dispatchEvent(new Event("unmute")))):void(!this._isMicMuted&&this._slow<this.muteThreshold&&(this._isMicMuted=!0,this._eventTarget.dispatchEvent(new Event("mute")),"recording"===this._state&&this.stop()))}},{key:"_setIsMicQuiet",value:function(){var e=this._audioContext.currentTime,t=this._maxVolume<this.volumeThreshold||this._slow<this.quietThreshold;!this._isMicQuiet&&t&&(this._quietStartTime=this._audioContext.currentTime,this._eventTarget.dispatchEvent(new Event("quiet"))),this._isMicQuiet&&!t&&(this._quietStartTime=0,this._eventTarget.dispatchEvent(new Event("unquiet"))),this._isMicQuiet=t;var n=this.recordingTimeMinAutoIncrease?this.recordingTimeMin-1+Math.pow(this.recordingTimeMax,1-1/(this._silentRecordingConsecutiveCount+1)):this.recordingTimeMin;this.autoStopRecording&&this._isMicQuiet&&"recording"===this._state&&e-this._recordingStartTime>n&&e-this._quietStartTime>this.quietTimeMin&&this.stop()}},{key:"_initAudioContext",value:function(){var e=this;return window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext?(this._audioContext=new AudioContext,document.addEventListener("visibilitychange",(function(){document.hidden?e._audioContext.suspend():e._audioContext.resume()})),lt.a.resolve()):lt.a.reject("Web Audio API not supported.")}},{key:"_initMicVolumeProcessor",value:function(){var e=this,t=this._audioContext.createScriptProcessor(this.bufferLength,this.numChannels,this.numChannels);return t.onaudioprocess=function(t){"recording"===e._state&&(e._recordBuffers(t.inputBuffer),e._audioContext.currentTime-e._recordingStartTime>e.recordingTimeMax&&e.stop());for(var n=t.inputBuffer.getChannelData(0),i=0,r=0,o=0;o<n.length;++o)i+=n[o]*n[o],Math.abs(n[o])>.99&&(r+=1);e._instant=Math.sqrt(i/n.length),e._slow=.95*e._slow+.05*e._instant,e._clip=n.length?r/n.length:0,e._setIsMicMuted(),e._setIsMicQuiet(),e._analyser.getFloatFrequencyData(e._analyserData),e._maxVolume=Math.max.apply(Math,ut()(e._analyserData))},this._micVolumeProcessor=t,lt.a.resolve()}},{key:"_initStream",value:function(){var e=this,t={audio:{optional:[{echoCancellation:this.requestEchoCancellation}]}};return navigator.mediaDevices.getUserMedia(t).then((function(t){e._stream=t,e._tracks=t.getAudioTracks(),e._tracks[0].onmute=e._setIsMicMuted,e._tracks[0].onunmute=e._setIsMicMuted;var n=e._audioContext.createMediaStreamSource(t),i=e._audioContext.createGain(),r=e._audioContext.createAnalyser();if(e.useBandPass){var o=e._audioContext.createBiquadFilter();o.type="bandpass",o.frequency.value=e.bandPassFrequency,o.gain.Q=e.bandPassQ,n.connect(o),o.connect(i),r.smoothingTimeConstant=.5}else n.connect(i),r.smoothingTimeConstant=.9;r.fftSize=e.bufferLength,r.minDecibels=-90,r.maxDecibels=-30,i.connect(r),r.connect(e._micVolumeProcessor),e._analyserData=new Float32Array(r.frequencyBinCount),e._analyser=r,e._micVolumeProcessor.connect(e._audioContext.destination),e._eventTarget.dispatchEvent(new Event("streamReady"))}))}},{key:"state",get:function(){return this._state}},{key:"stream",get:function(){return this._stream}},{key:"isMicQuiet",get:function(){return this._isMicQuiet}},{key:"isMicMuted",get:function(){return this._isMicMuted}},{key:"isSilentRecording",get:function(){return this._isSilentRecording}},{key:"isRecording",get:function(){return"recording"===this._state}},{key:"volume",get:function(){return{instant:this._instant,slow:this._slow,clip:this._clip,max:this._maxVolume}}},{key:"onstart",set:function(e){this._eventTarget.addEventListener("start",e)}},{key:"onstop",set:function(e){this._eventTarget.addEventListener("stop",e)}},{key:"ondataavailable",set:function(e){this._eventTarget.addEventListener("dataavailable",e)}},{key:"onerror",set:function(e){this._eventTarget.addEventListener("error",e)}},{key:"onstreamready",set:function(e){this._eventTarget.addEventListener("streamready",e)}},{key:"onmute",set:function(e){this._eventTarget.addEventListener("mute",e)}},{key:"onunmute",set:function(e){this._eventTarget.addEventListener("unmute",e)}},{key:"onsilentrecording",set:function(e){this._eventTarget.addEventListener("silentrecording",e)}},{key:"onunsilentrecording",set:function(e){this._eventTarget.addEventListener("unsilentrecording",e)}},{key:"onquiet",set:function(e){this._eventTarget.addEventListener("quiet",e)}},{key:"onunquiet",set:function(e){this._eventTarget.addEventListener("unquiet",e)}}]),e})(),bt=yt,xt=n(56),wt=n.n(xt),Vt=n(13),_t=n.n(Vt),Ct=function(e,t){t.onstart=function(){},t.onstop=function(){e.dispatch("stopRecording")},t.onsilentrecording=function(){e.commit("increaseSilentRecordingCount")},t.onunsilentrecording=function(){e.state.recState.silentRecordingCount>0&&e.commit("resetSilentRecordingCount")},t.onerror=function(e){},t.onstreamready=function(){},t.onmute=function(){e.commit("setIsMicMuted",!0)},t.onunmute=function(){e.commit("setIsMicMuted",!1)},t.onquiet=function(){e.commit("setIsMicQuiet",!0)},t.onunquiet=function(){e.commit("setIsMicQuiet",!1)},t.ondataavailable=function(n){var i=t.mimeType,r=new Blob([n.detail],{type:i}),o=0;i.startsWith("audio/ogg")&&(o=125+n.detail[125]+1),e.dispatch("lexPostContent",r,o).then((function(t){return e.state.recState.silentRecordingCount>=e.state.config.converser.silentConsecutiveRecordingMax?_t.a.reject("Too many consecutive silent recordings: "+e.state.recState.silentRecordingCount+"."):_t.a.all([e.dispatch("getAudioUrl",r),e.dispatch("getAudioUrl",t)])})).then((function(t){if("Fulfilled"!==e.state.lex.dialogState&&!e.state.recState.isConversationGoing)return _t.a.resolve();var n=wt()(t,2),i=n[0],r=n[1];return e.dispatch("pushMessage",{type:"human",audio:i,text:e.state.lex.inputTranscript}),e.dispatch("pushMessage",{type:"bot",audio:r,text:e.state.lex.message,dialogState:e.state.lex.dialogState,responseCard:e.state.lex.responseCard}),e.dispatch("playAudio",r,{},o)})).then((function(){return["Fulfilled","ReadyForFulfillment","Failed"].indexOf(e.state.lex.dialogState)>=0?e.dispatch("stopConversation").then((function(){return e.dispatch("reInitBot")})):e.state.recState.isConversationGoing?e.dispatch("startRecording"):_t.a.resolve()})).catch((function(t){e.dispatch("stopConversation"),e.dispatch("pushErrorMessage","I had an error. "+t),e.commit("resetSilentRecordingCount")}))}},It=Ct,Mt=n(37),St=n.n(Mt),kt=n(58),Tt=n.n(kt),Rt=(function(){function e(t){var n=t.botName,i=t.botAlias,r=void 0===i?"$LATEST":i,o=t.userId,s=t.lexRuntimeClient;if(St()(this,e),!n||!s)throw new Error("invalid lex client constructor arguments");this.botName=n,this.botAlias=r,this.userId=o||"lex-web-ui-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),this.lexRuntimeClient=s,this.credentials=this.lexRuntimeClient.config.credentials}return Tt()(e,[{key:"initCredentials",value:function(e){this.credentials=e,this.lexRuntimeClient.config.credentials=this.credentials,this.userId=e.identityId?e.identityId:this.userId}},{key:"postText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.lexRuntimeClient.postText({botAlias:this.botAlias,botName:this.botName,userId:this.userId,inputText:e,sessionAttributes:t});return this.credentials.getPromise().then((function(){return n.promise()}))}},{key:"postContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audio/ogg",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.type,o=r;r.startsWith("audio/wav")?o="audio/x-l16; sample-rate=16000; channel-count=1":r.startsWith("audio/ogg")&&(o="audio/x-cbr-opus-with-preamble; bit-rate=32000; frame-size-milliseconds=20; preamble-size="+i);var s=this.lexRuntimeClient.postContent({accept:n,botAlias:this.botAlias,botName:this.botName,userId:this.userId,contentType:o,inputStream:e,sessionAttributes:t});return this.credentials.getPromise().then((function(){return s.promise()}))}}]),e})(),Et=Rt,Bt=n(20),Ot=n.n(Bt),Pt=n(13),Ft=n.n(Pt),Qt=n(134),jt=n.n(Qt),Ut=n(135),qt=n.n(Ut),Lt=void 0,Wt=void 0,Gt=void 0,Dt=void 0,Nt=void 0,Jt={initCredentials:function(e,t){switch(e.state.awsCreds.provider){case"cognito":return Lt=t,e.dispatch("getCredentials");case"parentWindow":return e.dispatch("getCredentials");default:return Ft.a.reject("unknown credential provider")}},getConfigFromParent:function(e){return e.state.isRunningEmbedded?e.dispatch("sendMessageToParentWindow",{event:"initIframeConfig"}).then((function(e){return"resolve"===e.event&&"initIframeConfig"===e.type?Ft.a.resolve(e.data):Ft.a.reject("invalid config event from parent")})):Ft.a.resolve({})},initConfig:function(e,t){e.commit("mergeConfig",t)},initMessageList:function(e){e.commit("pushMessage",{type:"bot",text:e.state.config.lex.initialText})},initLexClient:function(e,t){return Gt=new Et({botName:e.state.config.lex.botName,botAlias:e.state.config.lex.botAlias,lexRuntimeClient:t}),e.commit("setLexSessionAttributes",e.state.config.lex.sessionAttributes),e.dispatch("getCredentials").then((function(){Gt.initCredentials(Lt)}))},initPollyClient:function(e,t){return e.state.recState.isRecorderEnabled?(Wt=t,e.commit("setPollyVoiceId",e.state.config.polly.voiceId),e.dispatch("getCredentials").then((function(e){Wt.config.credentials=e}))):Ft.a.resolve()},initRecorder:function(e){return e.state.recState.isRecorderEnabled?(Nt=new bt(e.state.config.recorder),Nt.init().then((function(){return Nt.initOptions(e.state.config.recorder)})).then((function(){return It(e,Nt)})).then((function(){return e.commit("setIsRecorderSupported",!0)})).then((function(){return e.commit("setIsMicMuted",Nt.isMicMuted)})).catch((function(t){["PermissionDeniedError","NotAllowedError"].indexOf(t.name)>=0&&e.dispatch("pushErrorMessage","It seems like the microphone access has been denied. If you want to use voice, please allow mic usage in your browser.")}))):Ft.a.resolve()},initBotAudio:function(e,t){if(e.state.recState.isRecorderEnabled){Dt=t;var n=void 0;""!==Dt.canPlayType("audio/ogg")?(e.commit("setAudioContentType","ogg"),n=jt.a):""!==Dt.canPlayType("audio/mp3")&&(e.commit("setAudioContentType","mp3"),n=qt.a),Dt.preload="auto",Dt.autoplay=!0,Dt.src=n}},reInitBot:function(e){return Ft.a.resolve().then((function(){return e.state.config.ui.pushInitialTextOnRestart?e.dispatch("pushMessage",{text:e.state.config.lex.initialText,type:"bot"}):Ft.a.resolve()})).then((function(){return e.state.config.lex.reInitSessionAttributesOnRestart?e.commit("setLexSessionAttributes",e.state.config.lex.sessionAttributes):Ft.a.resolve()}))},getAudioUrl:function(e,t){var n=void 0;try{n=URL.createObjectURL(t)}catch(e){return Ft.a.reject("There was an error processing the audio response ("+e+")")}return Ft.a.resolve(n)},setAudioAutoPlay:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt;return t.autoplay?Ft.a.resolve():new Ft.a(function(n,i){Dt.play(),t.onended=function(){e.commit("setAudioAutoPlay",t,!0),n()},t.onerror=function(n){e.commit("setAudioAutoPlay",t,!1),i("setting audio autoplay failed: "+n)}})},playAudio:function(e,t){return new Ft.a(function(n){Dt.onloadedmetadata=function(){e.commit("setIsBotSpeaking",!0),e.dispatch("playAudioHandler").then((function(){return n()}))},Dt.src=t})},playAudioHandler:function(e){return new Ft.a(function(t,n){var i=e.state.config.lex.enablePlaybackInterrupt,r=function(){e.commit("setIsBotSpeaking",!1);var t=e.state.botAudio.interruptIntervalId;t&&i&&(clearInterval(t),e.commit("setBotPlaybackInterruptIntervalId",0),e.commit("setIsLexInterrupting",!1),e.commit("setCanInterruptBotPlayback",!1),e.commit("setIsBotPlaybackInterrupting",!1))};Dt.onerror=function(e){r(),n("There was an error playing the response ("+e+")")},Dt.onended=function(){r(),t()},Dt.onpause=Dt.onended,i&&e.dispatch("playAudioInterruptHandler")})},playAudioInterruptHandler:function(e){var t=e.state.botAudio.isSpeaking,n=e.state.config.lex,i=n.enablePlaybackInterrupt,r=n.playbackInterruptMinDuration,o=n.playbackInterruptVolumeThreshold,s=n.playbackInterruptLevelThreshold,a=n.playbackInterruptNoiseThreshold;if(i||t||!e.state.lex.isInterrupting||!(Dt.duration<r)){var u=setInterval((function(){var t=Dt.duration,n=Dt.played.end(0),i=e.state.botAudio.canInterrupt;!i&&n>r&&t-n>.5&&Nt.volume.max<a?e.commit("setCanInterruptBotPlayback",!0):i&&t-n<.5&&e.commit("setCanInterruptBotPlayback",!1),i&&Nt.volume.max>o&&Nt.volume.slow>s&&(clearInterval(u),e.commit("setIsBotPlaybackInterrupting",!0),setTimeout((function(){Dt.pause()}),500))}),200);e.commit("setBotPlaybackInterruptIntervalId",u)}},startConversation:function(e){return e.commit("setIsConversationGoing",!0),e.dispatch("startRecording")},stopConversation:function(e){e.commit("setIsConversationGoing",!1)},startRecording:function(e){return!0===e.state.recState.isMicMuted?(e.dispatch("stopConversation"),Ft.a.reject("The microphone seems to be muted.")):(e.commit("startRecording",Nt),Ft.a.resolve())},stopRecording:function(e){e.commit("stopRecording",Nt)},getRecorderVolume:function(e){return e.state.recState.isRecorderEnabled?Nt.volume:Ft.a.resolve()},pollyGetBlob:function(e,t){var n=Wt.synthesizeSpeech({Text:t,VoiceId:e.state.polly.voiceId,OutputFormat:e.state.polly.outputFormat});return e.dispatch("getCredentials").then((function(){return n.promise()})).then((function(e){return Ft.a.resolve(new Blob([e.AudioStream],{type:e.ContentType}))}))},pollySynthesizeSpeech:function(e,t){return e.dispatch("pollyGetBlob",t).then((function(t){return e.dispatch("getAudioUrl",t)})).then((function(t){return e.dispatch("playAudio",t)}))},interruptSpeechConversation:function(e){return e.state.recState.isConversationGoing?new Ft.a(function(t,n){e.dispatch("stopConversation").then((function(){return e.dispatch("stopRecording")})).then((function(){e.state.botAudio.isSpeaking&&Dt.pause()})).then((function(){var i=0;e.commit("setIsLexInterrupting",!0);var r=setInterval((function(){e.state.lex.isProcessing||(clearInterval(r),e.commit("setIsLexInterrupting",!1),t()),i>20&&(clearInterval(r),e.commit("setIsLexInterrupting",!1),n("interrupt interval exceeded")),i+=1}),250)}))}):Ft.a.resolve()},postTextMessage:function(e,t){e.dispatch("interruptSpeechConversation").then((function(){return e.dispatch("pushMessage",t)})).then((function(){return e.dispatch("lexPostText",t.text)})).then((function(t){return e.dispatch("pushMessage",{text:t.message,type:"bot",dialogState:e.state.lex.dialogState,responseCard:e.state.lex.responseCard})})).then((function(){"Fulfilled"===e.state.lex.dialogState&&e.dispatch("reInitBot")})).catch((function(t){e.dispatch("pushErrorMessage","I was unable to process your message. "+t)}))},lexPostText:function(e,t){return e.commit("setIsLexProcessing",!0),e.dispatch("getCredentials").then((function(){return Gt.postText(t,e.state.lex.sessionAttributes)})).then((function(t){return e.commit("setIsLexProcessing",!1),e.dispatch("updateLexState",t).then((function(){return Ft.a.resolve(t)}))}))},lexPostContent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.commit("setIsLexProcessing",!0);var i=void 0;return e.dispatch("getCredentials").then((function(){return i=performance.now(),Gt.postContent(t,e.state.lex.sessionAttributes,e.state.lex.acceptFormat,n)})).then((function(t){performance.now();return e.commit("setIsLexProcessing",!1),e.dispatch("updateLexState",t).then((function(){return e.dispatch("processLexContentResponse",t)})).then((function(e){return Ft.a.resolve(e)}))}))},processLexContentResponse:function(e,t){var n=t.audioStream,i=t.contentType,r=t.dialogState;return Ft.a.resolve().then((function(){if(!n||!n.length){var t="ReadyForFulfillment"===r?"All done":"There was an error";return e.dispatch("pollyGetBlob",t)}return Ft.a.resolve(new Blob([n],{type:i}))}))},updateLexState:function(e,t){var n={dialogState:"",inputTranscript:"",intentName:"",message:"",responseCard:null,sessionAttributes:{},slotToElicit:"",slots:{}};if("sessionAttributes"in t&&"appContext"in t.sessionAttributes)try{var i=JSON.parse(t.sessionAttributes.appContext);"responseCard"in i&&(n.responseCard=i.responseCard)}catch(e){return Ft.a.reject("error parsing appContext in sessionAttributes")}return e.commit("updateLexState",Ot()({},n,t)),e.state.isRunningEmbedded&&e.dispatch("sendMessageToParentWindow",{event:"updateLexState",state:e.state.lex}),Ft.a.resolve()},pushMessage:function(e,t){e.commit("pushMessage",t)},pushErrorMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Failed";e.commit("pushMessage",{type:"bot",text:t,dialogState:n})},getCredentialsFromParent:function(e){return new Date(Lt&&Lt.expireTime?Lt.expireTime:0)>Date.now()?Ft.a.resolve(Lt):e.dispatch("sendMessageToParentWindow",{event:"getCredentials"}).then((function(e){return"resolve"===e.event&&"getCredentials"===e.type?Ft.a.resolve(e.data):Ft.a.reject("invalid credential event from parent")})).then((function(e){var t=e.data.Credentials,n=t.AccessKeyId,i=t.SecretKey,r=t.SessionToken,o=e.data.IdentityId;return Lt={accessKeyId:n,secretAccessKey:i,sessionToken:r,identityId:o,getPromise:function(){return Ft.a.resolve()}}}))},getCredentials:function(e){return"parentWindow"===e.state.awsCreds.provider?e.dispatch("getCredentialsFromParent"):Lt.getPromise().then((function(){return Lt}))},toggleIsUiMinimized:function(e){return e.commit("toggleIsUiMinimized"),e.dispatch("sendMessageToParentWindow",{event:"toggleMinimizeUi"})},sendMessageToParentWindow:function(e,t){if(!e.state.isRunningEmbedded){var n="sendMessage called when not running embedded";return Ft.a.reject(n)}return new Ft.a(function(e,n){var i=new MessageChannel;i.port1.onmessage=function(t){i.port1.close(),i.port2.close(),"resolve"===t.data.event?e(t.data):n("error in sendMessageToParentWindow "+t.data.error)},parent.postMessage(t,$e.ui.parentOrigin,[i.port2])})}},Kt={strict:!1,state:et,getters:tt,mutations:st,actions:Jt};n.d(t,"Store",(function(){return gn})),n.d(t,"Loader",(function(){return vn}));var zt=n(20),Zt=n.n(zt),Ht=n(37),Yt=n.n(Ht),Xt=n(38),$t=n.n(Xt),en=n(13),tn=n.n(en),nn=n(83),rn=n.n(nn),on=n(84),sn=n.n(on),an=n(85),un=(n.n(an),n(86)),cn=n.n(un),ln=n(87),dn=n.n(ln),fn={name:"lex-web-ui",template:"<lex-web></lex-web>",components:{LexWeb:Re}},pn={template:"<p>Loading. Please wait...</p>"},hn={template:"<p>An error ocurred...</p>"},An=function(e){var t=e.component,n=void 0===t?tn.a.resolve(fn):t,i=e.loading,r=void 0===i?pn:i,o=e.error,s=void 0===o?hn:o,a=e.delay,u=void 0===a?200:a,c=e.timeout;return{component:n,loading:r,error:s,delay:u,timeout:void 0===c?1e4:c}},mn={install:function(e,t){var n=t.name,i=void 0===n?"$lexWebUi":n,r=t.componentName,o=void 0===r?"lex-web-ui":r,s=t.awsConfig,a=t.lexRuntimeClient,u=t.pollyClient,c=t.component,l=void 0===c?An:c,d=t.config,f=void 0===d?$e:d,p={awsConfig:s,lexRuntimeClient:a,pollyClient:u,config:f};$t()(e.prototype,i,{value:p}),e.component(o,l)}},gn=Kt,vn=function e(t){Yt()(this,e),this.config=Zt()({},$e,t);var n=window.AWS&&window.AWS.Config?window.AWS.Config:an.Config,i=window.AWS&&window.AWS.CognitoIdentityCredentials?window.AWS.CognitoIdentityCredentials:an.CognitoIdentityCredentials,r=window.AWS&&window.AWS.Polly?window.AWS.Polly:dn.a,o=window.AWS&&window.AWS.LexRuntime?window.AWS.LexRuntime:cn.a;if(!(n&&i&&r&&o))throw new Error("unable to find AWS SDK");var s=new i({IdentityPoolId:this.config.cognito.poolId},{region:this.config.region}),a=new n({region:this.config.region,credentials:s}),u=new o(a),c=this.config.recorder.enable?new r(a):null,l=window.Vue?window.Vue:rn.a;if(!l)throw new Error("unable to find Vue");var d=window.Vuex?window.Vuex:sn.a;if(!d)throw new Error("unable to find Vue");this.store=new d.Store(Kt),l.use(mn,{awsConfig:a,lexRuntimeClient:u,pollyClient:c})}}),(function(e,t,n){n(61),e.exports=n(0).Object.assign}),(function(e,t,n){var i=n(7);i(i.S+i.F,"Object",{assign:n(62)})}),(function(e,t,n){"use strict";var i=n(12),r=n(36),o=n(22),s=n(23),a=n(46),u=Object.assign;e.exports=!u||n(11)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i}))?function(e,t){for(var n=s(e),u=arguments.length,c=1,l=r.f,d=o.f;u>c;)for(var f,p=a(arguments[c++]),h=l?i(p).concat(l(p)):i(p),A=h.length,m=0;A>m;)d.call(p,f=h[m++])&&(n[f]=p[f]);return n}:u}),(function(e,t,n){var i=n(10),r=n(31),o=n(64);e.exports=function(e){return function(t,n,s){var a,u=i(t),c=r(u.length),l=o(s,c);if(e&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}}),(function(e,t,n){var i=n(32),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}}),(function(e,t,n){n(66);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}}),(function(e,t,n){var i=n(7);i(i.S+i.F*!n(5),"Object",{defineProperty:n(3).f})}),(function(e,t,n){n(47),n(19),n(26),n(75),e.exports=n(0).Promise}),(function(e,t,n){var i=n(32),r=n(30);e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),u=i(n),c=a.length;return u<0||u>=c?e?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}}),(function(e,t,n){"use strict";var i=n(50),r=n(17),o=n(25),s={};n(8)(s,n(1)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),o(e,t+" Iterator")}}),(function(e,t,n){var i=n(3),r=n(4),o=n(12);e.exports=n(5)?Object.defineProperties:function(e,t){r(e);for(var n,s=o(t),a=s.length,u=0;a>u;)i.f(e,n=s[u++],t[n]);return e}}),(function(e,t,n){var i=n(9),r=n(23),o=n(33)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}}),(function(e,t,n){"use strict";var i=n(73),r=n(74),o=n(14),s=n(10);e.exports=n(48)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")}),(function(e,t){e.exports=function(){}}),(function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}}),(function(e,t,n){"use strict";var i,r,o,s=n(24),a=n(2),u=n(15),c=n(39),l=n(7),d=n(16),f=n(27),p=n(76),h=n(77),A=n(78),m=n(54).set,g=n(80)(),v=a.TypeError,y=a.process,b=a.Promise,y=a.process,x="process"==c(y),w=function(){},V=!!(function(){try{var e=b.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(w,w)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(w)instanceof t}catch(e){}})(),_=function(e,t){return e===t||e===b&&t===o},C=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},I=function(e){return _(b,e)?new M(e):new r(e)},M=r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw v("Bad Promise constructor");t=e,n=i}),this.resolve=f(t),this.reject=f(n)},S=function(e){try{e()}catch(e){return{error:e}}},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var i=e._v,r=1==e._s,o=0;n.length>o;)!(function(t){var n,o,s=r?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(r||(2==e._h&&E(e),e._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&c.exit()),n===t.promise?u(v("Promise-chain cycle")):(o=C(n))?o.call(n,a,u):a(n)):u(i)}catch(e){u(e)}})(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)}))}},T=function(e){m.call(a,(function(){var t,n,i,r=e._v;if(R(e)&&(t=S((function(){x?y.emit("unhandledRejection",r,e):(n=a.onunhandledrejection)?n({promise:e,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)})),e._h=x||R(e)?2:1),e._a=void 0,t)throw t.error}))},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!R(t.promise))return!1;return!0},E=function(e){m.call(a,(function(){var t;x?y.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},O=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw v("Promise can't be resolved itself");(t=C(e))?g((function(){var i={_w:n,_d:!1};try{t.call(e,u(O,i,1),u(B,i,1))}catch(e){B.call(i,e)}})):(n._v=e,n._s=1,k(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};V||(b=function(e){p(this,b,"Promise","_h"),f(e),i.call(this);try{e(u(O,this,1),u(B,this,1))}catch(e){B.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(81)(b.prototype,{then:function(e,t){var n=I(A(this,b));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?y.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),M=function(){var e=new i;this.promise=e,this.resolve=u(O,e,1),this.reject=u(B,e,1)}),l(l.G+l.W+l.F*!V,{Promise:b}),n(25)(b,"Promise"),n(82)("Promise"),o=n(0).Promise,l(l.S+l.F*!V,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!V),"Promise",{resolve:function(e){if(e instanceof b&&_(e.constructor,this))return e;var t=I(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(V&&n(55)((function(e){b.all(e).catch(w)}))),"Promise",{all:function(e){var t=this,n=I(t),i=n.resolve,r=n.reject,o=S((function(){var n=[],o=0,s=1;h(e,!1,(function(e){var a=o++,u=!1;n.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,n[a]=e,--s||i(n))}),r)})),--s||i(n)}));return o&&r(o.error),n.promise},race:function(e){var t=this,n=I(t),i=n.reject,r=S((function(){h(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return r&&i(r.error),n.promise}})}),(function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}}),(function(e,t,n){var i=n(15),r=n(52),o=n(53),s=n(4),a=n(31),u=n(40),c={},l={},t=e.exports=function(e,t,n,d,f){var p,h,A,m,g=f?function(){return e}:u(e),v=i(n,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>y;y++)if((m=t?v(s(h=e[y])[0],h[1]):v(e[y]))===c||m===l)return m}else for(A=g.call(e);!(h=A.next()).done;)if((m=r(A,v,h.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l}),(function(e,t,n){var i=n(4),r=n(27),o=n(1)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[o])?t:r(n)}}),(function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}}),(function(e,t,n){var i=n(2),r=n(54).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(18)(s);e.exports=function(){var e,t,n,c=function(){var i,r;for(u&&(i=s.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(c)};else if(o){var l=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}else if(a&&a.resolve){var f=a.resolve();n=function(){f.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}}),(function(e,t,n){var i=n(8);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}}),(function(e,t,n){"use strict";var i=n(2),r=n(0),o=n(3),s=n(5),a=n(1)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}}),(function(t,n){t.exports=e}),(function(e,n){e.exports=t}),(function(e,t){e.exports=n}),(function(e,t){e.exports=i}),(function(e,t){e.exports=r}),(function(e,t){}),(function(e,t){}),(function(e,t){}),(function(e,t){}),(function(e,t){}),(function(e,t){}),(function(e,t){}),(function(e,t,n){e.exports={default:n(96),__esModule:!0}}),(function(e,t,n){n(97),e.exports=n(0).Object.keys}),(function(e,t,n){var i=n(23),r=n(12);n(98)("keys",(function(){return function(e){return r(i(e))}}))}),(function(e,t,n){var i=n(7),r=n(0),o=n(11);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",s)}}),(function(e,t,n){"use strict";t.__esModule=!0;var i=n(38),r=(function(e){return e&&e.__esModule?e:{default:e}})(i);t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}),(function(e,t,n){e.exports={default:n(101),__esModule:!0}}),(function(e,t,n){n(26),n(19),e.exports=n(102)}),(function(e,t,n){var i=n(39),r=n(1)("iterator"),o=n(14);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}}),(function(e,t,n){e.exports={default:n(104),__esModule:!0}}),(function(e,t,n){n(26),n(19),e.exports=n(105)}),(function(e,t,n){var i=n(4),r=n(40);e.exports=n(0).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}}),(function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=106}),(function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAB4ElEQVRIDeXBz0uTcQDH8c8xLe2SpDVb9AMV7RZCUIdEodAZQrH/oCC65II6FAhu4Oi4sfoPjI6BwU4J/QGKEUQ/NLcYM29pkI/0vJvbHp7vnm19Z0GXXi/pX2GIae5xTn+HWVz2uMT155jANK79o4MeiXlMzySOcVitIkwWF/hIDlOeVcAlS1h2HGIVm08clA23acUt2ZDB5JAmwjgpHEwp2fAQn8OIqriMg+++bDjBNp60DKTxbHFcdozxlYqIDExQscGIWsEVNqmYlIEIFZuMyY4w3/FkZCCDZ5uQbHiEz2FUVYyyi++BbHiKyeEJk0TIsIspJRvu0IqbsqGDNWw+0C47wmRxgXesY1rnPeDykl41xyViROlTGZ0clXiOaV6im06V0U+UGBcVRIyKHHOEVEYE01WV0UuSPBV3FUQU3w5J2lTCLC57fjKjEtp5jIPvuoLoo9YKp1TCEDGmGVQJZ3hLrbOqR55aRQZkYJANaq2pEeYIytGlKrr5QlBCjRBih6AFVZEl6Ac9aowk9aZUwg3qxdUMbawQtKwS3hC0xAE1x2mKBA1zgaACJ/V7DJCjVoIktT7TLzu6WMC0yGtMLziiVjHFMp4CRTxLXNN+MUyCRQp8Y4sCr4hzXv+jX+Z26XqyE0SfAAAAAElFTkSuQmCC"}),(function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=108}),(function(e,t,n){function i(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./config.dev.json":110,"./config.prod.json":111,"./config.test.json":112};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=109}),(function(e,t){e.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:'You can ask me for help ordering flowers. Just type "order flowers" or click on the mic and say it.',initialSpeechInstruction:"Say 'Order Flowers' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"http://localhost:8080",pageTitle:"Order Flowers Bot",toolbarTitle:"Order Flowers"},recorder:{preset:"speech_recognition"}}}),(function(e,t){e.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:'You can ask me for help ordering flowers. Just type "order flowers" or click on the mic and say it.',initialSpeechInstruction:"Say 'Order Flowers' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"",pageTitle:"Order Flowers Bot",toolbarTitle:"Order Flowers"},recorder:{preset:"speech_recognition"}}}),(function(e,t){e.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:'You can ask me for help ordering flowers. Just type "order flowers" or click on the mic and say it.',initialSpeechInstruction:"Say 'Order Flowers' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"http://localhost:8080",pageTitle:"Order Flowers Bot",toolbarTitle:"Order Flowers"},recorder:{preset:"speech_recognition"}}}),(function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(114),o=i(r),s=n(116),a=i(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":u(e)}}),(function(e,t,n){e.exports={default:n(115),__esModule:!0}}),(function(e,t,n){n(19),n(26),e.exports=n(41).f("iterator")}),(function(e,t,n){e.exports={default:n(117),__esModule:!0}}),(function(e,t,n){n(118),n(47),n(125),n(126),e.exports=n(0).Symbol}),(function(e,t,n){"use strict";var i=n(2),r=n(9),o=n(5),s=n(7),a=n(49),u=n(119).KEY,c=n(11),l=n(34),d=n(25),f=n(21),p=n(1),h=n(41),A=n(42),m=n(120),g=n(121),v=n(122),y=n(4),b=n(10),x=n(29),w=n(17),V=n(50),_=n(123),C=n(124),I=n(3),M=n(12),S=C.f,k=I.f,T=_.f,R=i.Symbol,E=i.JSON,B=E&&E.stringify,O=p("_hidden"),P=p("toPrimitive"),F={}.propertyIsEnumerable,Q=l("symbol-registry"),j=l("symbols"),U=l("op-symbols"),q=Object.prototype,L="function"==typeof R,W=i.QObject,G=!W||!W.prototype||!W.prototype.findChild,D=o&&c((function(){return 7!=V(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=S(q,t);i&&delete q[t],k(e,t,n),i&&e!==q&&k(q,t,i)}:k,N=function(e){var t=j[e]=V(R.prototype);return t._k=e,t},J=L&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},K=function(e,t,n){return e===q&&K(U,t,n),y(e),t=x(t,!0),y(n),r(j,t)?(n.enumerable?(r(e,O)&&e[O][t]&&(e[O][t]=!1),n=V(n,{enumerable:w(0,!1)})):(r(e,O)||k(e,O,w(1,{})),e[O][t]=!0),D(e,t,n)):k(e,t,n)},z=function(e,t){y(e);for(var n,i=g(t=b(t)),r=0,o=i.length;o>r;)K(e,n=i[r++],t[n]);return e},Z=function(e,t){return void 0===t?V(e):z(V(e),t)},H=function(e){var t=F.call(this,e=x(e,!0));return!(this===q&&r(j,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(j,e)||r(this,O)&&this[O][e])||t)},Y=function(e,t){if(e=b(e),t=x(t,!0),e!==q||!r(j,t)||r(U,t)){var n=S(e,t);return!n||!r(j,t)||r(e,O)&&e[O][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=T(b(e)),i=[],o=0;n.length>o;)r(j,t=n[o++])||t==O||t==u||i.push(t);return i},$=function(e){for(var t,n=e===q,i=T(n?U:b(e)),o=[],s=0;i.length>s;)!r(j,t=i[s++])||n&&!r(q,t)||o.push(j[t]);return o};L||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(U,n),r(this,O)&&r(this[O],e)&&(this[O][e]=!1),D(this,e,w(1,n))};return o&&G&&D(q,e,{configurable:!0,set:t}),N(e)},a(R.prototype,"toString",(function(){return this._k})),C.f=Y,I.f=K,n(57).f=_.f=X,n(22).f=H,n(36).f=$,o&&!n(24)&&a(q,"propertyIsEnumerable",H,!0),h.f=function(e){return N(p(e))}),s(s.G+s.W+s.F*!L,{Symbol:R});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ee=M(p.store),te=0;ee.length>te;)A(ee[te++]);s(s.S+s.F*!L,"Symbol",{for:function(e){return r(Q,e+="")?Q[e]:Q[e]=R(e)},keyFor:function(e){if(J(e))return m(Q,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!L,"Object",{create:Z,defineProperty:K,defineProperties:z,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:$}),E&&s(s.S+s.F*(!L||c((function(){var e=R();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!J(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&v(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!J(t))return t}),i[1]=t,B.apply(E,i)}}}),R.prototype[P]||n(8)(R.prototype,P,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)}),(function(e,t,n){var i=n(21)("meta"),r=n(16),o=n(9),s=n(3).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(11)((function(){return u(Object.preventExtensions({}))})),l=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},f=function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},p=function(e){return c&&h.NEED&&u(e)&&!o(e,i)&&l(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}}),(function(e,t,n){var i=n(12),r=n(10);e.exports=function(e,t){for(var n,o=r(e),s=i(o),a=s.length,u=0;a>u;)if(o[n=s[u++]]===t)return n}}),(function(e,t,n){var i=n(12),r=n(36),o=n(22);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,a=n(e),u=o.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}}),(function(e,t,n){var i=n(18);e.exports=Array.isArray||function(e){return"Array"==i(e)}}),(function(e,t,n){var i=n(10),r=n(57).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):r(i(e))}}),(function(e,t,n){var i=n(22),r=n(17),o=n(10),s=n(29),a=n(9),u=n(44),c=Object.getOwnPropertyDescriptor;t.f=n(5)?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return r(!i.f.call(e,t),e[t])}}),(function(e,t,n){n(42)("asyncIterator")}),(function(e,t,n){n(42)("observable")}),(function(e,t,n){"use strict";t.__esModule=!0;var i=n(128),r=(function(e){return e&&e.__esModule?e:{default:e}})(i);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}}),(function(e,t,n){e.exports={default:n(129),__esModule:!0}}),(function(e,t,n){n(19),n(130),e.exports=n(0).Array.from}),(function(e,t,n){"use strict";var i=n(15),r=n(7),o=n(23),s=n(52),a=n(53),u=n(31),c=n(131),l=n(40);r(r.S+r.F*!n(55)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,A=h>1?arguments[1]:void 0,m=void 0!==A,g=0,v=l(f);if(m&&(A=i(A,h>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(t=u(f.length),n=new p(t);t>g;g++)c(n,g,m?A(f[g],g):f[g]);else for(d=v.call(f),n=new p;!(r=d.next()).done;g++)c(n,g,m?s(d,A,[r.value,g],!0):r.value);return n.length=g,n}})}),(function(e,t,n){"use strict";var i=n(3),r=n(17);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}}),(function(e,t,n){e.exports=function(){return n(133)("/*!\n* lex-web-ui v\"0.8.0\"\n* (c) 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n* Released under the Amazon Software License.\n*/   \n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ ((function(module, exports) {\n\n// based on https://github.com/mattdiamond/Recorderjs/blob/master/src/recorder.js\n// with a few optimizations including downsampling and trimming quiet samples\n\n/* global Blob self */\n/* eslint prefer-arrow-callback: [\"error\", { \"allowNamedFunctions\": true }] */\n/* eslint no-param-reassign: [\"error\", { \"props\": false }] */\n/* eslint no-use-before-define: [\"error\", { \"functions\": false }] */\n/* eslint no-plusplus: off */\n/* eslint comma-dangle: [\"error\", {\"functions\": \"never\", \"objects\": \"always-multiline\"}] */\nconst bitDepth = 16;\nconst bytesPerSample = bitDepth / 8;\nconst outSampleRate = 16000;\nconst outNumChannels = 1;\n\nlet recLength = 0;\nlet recBuffers = [];\n\nconst options = {\n  sampleRate: 44000,\n  numChannels: 1,\n  useDownsample: true,\n  // controls if the encoder will trim silent samples at begining and end of buffer\n  useTrim: true,\n  // trim samples below this value at the beginnig and end of the buffer\n  // lower the value trim less silence (larger file size)\n  // reasonable values seem to be between 0.005 and 0.0005\n  quietTrimThreshold: 0.0008,\n  // how many samples to add back to the buffer before/after the quiet threshold\n  // higher values result in less silence trimming (larger file size)\n  // reasonable values seem to be between 3500 and 5000\n  quietTrimSlackBack: 4000,\n};\n\nself.onmessage = (evt) => {\n  switch (evt.data.command) {\n    case 'init':\n      init(evt.data.config);\n      break;\n    case 'record':\n      record(evt.data.buffer);\n      break;\n    case 'exportWav':\n      exportWAV(evt.data.type);\n      break;\n    case 'getBuffer':\n      getBuffer();\n      break;\n    case 'clear':\n      clear();\n      break;\n    case 'close':\n      self.close();\n      break;\n    default:\n      break;\n  }\n};\n\nfunction init(config) {\n  Object.assign(options, config);\n  initBuffers();\n}\n\nfunction record(inputBuffer) {\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    recBuffers[channel].push(inputBuffer[channel]);\n  }\n  recLength += inputBuffer[0].length;\n}\n\nfunction exportWAV(type) {\n  const buffers = [];\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n  }\n  let interleaved;\n  if (options.numChannels === 2 && outNumChannels === 2) {\n    interleaved = interleave(buffers[0], buffers[1]);\n  } else {\n    interleaved = buffers[0];\n  }\n  const downsampledBuffer = downsampleTrimBuffer(interleaved, outSampleRate);\n  const dataview = encodeWAV(downsampledBuffer);\n  const audioBlob = new Blob([dataview], { type });\n\n  self.postMessage({\n    command: 'exportWAV',\n    data: audioBlob,\n  });\n}\n\nfunction getBuffer() {\n  const buffers = [];\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n  }\n  self.postMessage({ command: 'getBuffer', data: buffers });\n}\n\nfunction clear() {\n  recLength = 0;\n  recBuffers = [];\n  initBuffers();\n}\n\nfunction initBuffers() {\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    recBuffers[channel] = [];\n  }\n}\n\nfunction mergeBuffers(recBuffer, length) {\n  const result = new Float32Array(length);\n  let offset = 0;\n  for (let i = 0; i < recBuffer.length; i++) {\n    result.set(recBuffer[i], offset);\n    offset += recBuffer[i].length;\n  }\n  return result;\n}\n\nfunction interleave(inputL, inputR) {\n  const length = inputL.length + inputR.length;\n  const result = new Float32Array(length);\n\n  let index = 0;\n  let inputIndex = 0;\n\n  while (index < length) {\n    result[index++] = inputL[inputIndex];\n    result[index++] = inputR[inputIndex];\n    inputIndex++;\n  }\n  return result;\n}\n\nfunction floatTo16BitPCM(output, offset, input) {\n  for (let i = 0, o = offset; i < input.length; i++, o += 2) {\n    const s = Math.max(-1, Math.min(1, input[i]));\n    output.setInt16(o, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n  }\n}\n\n// Lex doesn't require proper wav header\n// still inserting wav header for playing on client side\nfunction addHeader(view, length) {\n  // RIFF identifier 'RIFF'\n  view.setUint32(0, 1380533830, false);\n  // file length minus RIFF identifier length and file description length\n  view.setUint32(4, 36 + length, true);\n  // RIFF type 'WAVE'\n  view.setUint32(8, 1463899717, false);\n  // format chunk identifier 'fmt '\n  view.setUint32(12, 1718449184, false);\n  // format chunk length\n  view.setUint32(16, 16, true);\n  // sample format (raw)\n  view.setUint16(20, 1, true);\n  // channel count\n  view.setUint16(22, outNumChannels, true);\n  // sample rate\n  view.setUint32(24, outSampleRate, true);\n  // byte rate (sample rate * block align)\n  view.setUint32(28, outSampleRate * bytesPerSample * outNumChannels, true);\n  // block align (channel count * bytes per sample)\n  view.setUint16(32, bytesPerSample * outNumChannels, true);\n  // bits per sample\n  view.setUint16(34, bitDepth, true);\n  // data chunk identifier 'data'\n  view.setUint32(36, 1684108385, false);\n}\n\nfunction encodeWAV(samples) {\n  const buffer = new ArrayBuffer(44 + (samples.length * 2));\n  const view = new DataView(buffer);\n\n  addHeader(view, samples.length);\n  floatTo16BitPCM(view, 44, samples);\n\n  return view;\n}\n\nfunction downsampleTrimBuffer(buffer, rate) {\n  if (rate === options.sampleRate) {\n    return buffer;\n  }\n\n  const length = buffer.length;\n  const sampleRateRatio = options.sampleRate / rate;\n  const newLength = Math.round(length / sampleRateRatio);\n\n  const result = new Float32Array(newLength);\n  let offsetResult = 0;\n  let offsetBuffer = 0;\n  let firstNonQuiet = 0;\n  let lastNonQuiet = length;\n  while (offsetResult < result.length) {\n    const nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n    let accum = 0;\n    let count = 0;\n    for (let i = offsetBuffer; (i < nextOffsetBuffer) && (i < length); i++) {\n      accum += buffer[i];\n      count++;\n    }\n    // mark first and last sample over the quiet threshold\n    if (accum > options.quietTrimThreshold) {\n      if (firstNonQuiet === 0) {\n        firstNonQuiet = offsetResult;\n      }\n      lastNonQuiet = offsetResult;\n    }\n    result[offsetResult] = accum / count;\n    offsetResult++;\n    offsetBuffer = nextOffsetBuffer;\n  }\n\n  /*\n  console.info('encoder trim size reduction',\n    (Math.min(newLength, lastNonQuiet + options.quietTrimSlackBack) -\n    Math.max(0, firstNonQuiet - options.quietTrimSlackBack)) / result.length\n  );\n  */\n  return (options.useTrim) ?\n    // slice based on quiet threshold and put slack back into the buffer\n    result.slice(\n      Math.max(0, firstNonQuiet - options.quietTrimSlackBack),\n      Math.min(newLength, lastNonQuiet + options.quietTrimSlackBack)\n    ) :\n    result;\n}\n\n\n/***/ }))\n/******/ ]);",n.p+"bundle/wav-worker.min.js")}}),(function(e,t){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var i;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new r,i.append(e),i=i.getBlob()}catch(t){i=new Blob([e])}return new Worker(n.createObjectURL(i))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}}),(function(e,t){e.exports="data:audio/ogg;base64,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"}),(function(e,t){e.exports="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAAA8TEFNRTMuOTlyBK8AAAAAAAAAADUgJAJxQQABzAAAAnEsm4LsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAABgAAB/gAAACBLAGZ8AAAEAOAAAHG7///////////qWy3+NQOB//////////+RTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xDEIAOAAAH+AAAAICwAJQwAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="})])}));